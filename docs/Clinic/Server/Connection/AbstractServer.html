<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (13.0.1) on Mon Dec 02 22:55:48 EST 2019 -->
<title>AbstractServer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2019-12-02">
<meta name="description" content="declaration: package: Clinic.Server.Connection, class: AbstractServer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":6,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">Clinic.Server.Connection</a></div>
<h1 title="Class AbstractServer" class="title">Class AbstractServer</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">Clinic.Server.Connection.AbstractServer</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Runnable</code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="AdaptableServer.html" title="class in Clinic.Server.Connection">AdaptableServer</a></code>, <code><a href="MyServer.html" title="class in Clinic.Server.Connection">MyServer</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">AbstractServer</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">The <code> AbstractServer </code> class maintains a thread that waits
 for connection attempts from clients. When a connection attempt occurs
 it creates a new <code> ConnectionToClient </code> instance which
 runs as a thread. When a client is thus connected to the
 server, the two programs can then exchange <code> Object </code>
 instances.<p>

 Method <code> handleMessageFromClient </code> must be defined by
 a concrete subclass. Several other hook methods may also be
 overriden.<p>

 Several public service methods are provided to applications that use
 this framework, and several hook methods are also available<p>

 The modifications made to this class in version 2.2 are:
 <ul>
 <li> The synchronization of the <code>close()</code> method
 is now limited to the client threads closing sequence. The
 call to <code>serverClosed()</code> is outside the synchronized
 block and is preceeded by a join that garantees that
 <code>serverStopped()</code> is always called before.
 <li> Method <code>isClosed()</code> has been added.
 <li> When a client is accepted, the corresponding
 connection thread will be created only if the server
 has not been stopped.
 </ul>
 The modifications made to this class in version 2.3 are:
 <ul>
 <li> An instance variable refering to the current connection
 factory. Refer to null value by default, in this case regular
 <code>ConnectionToClient</code> instances are created as in the
 previous versions. 
 <li> Method <code>setConnectionFactory()</code> has been added.
 <li> In the run method, a call to the connection factory
 is made if such a factory is available.  
 <li> Method <code>handleMessageFromClient</code> is not always
 called depending on the value returned by the 
 <code>handleMessageFromClient</code> of the <code>ConnectionToClient</code>
 class.
 <li> The <code>clientException</code> method is still the one called when
 an exception is thrown when handling the connection with one client. However
 <code>ClassNotFoundException</code> and <code>RuntimeException</code> instances
 can now be received.  
 <li> The call to <code>serverStopped()</code> has been moved in 
 the <code>run</code> method.
 <li> Method <code>isListening()</code> has been modified.
 <li> Instance variable <code>readToStop</code> is now initialized to <code>true</code>
 </ul><p>

 Project Name: OCSF (Object Clinic.Client-Clinic.Server Framework)<p></div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>December 2003 (2.31)</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Dr Robert Lagani&egrave;re, Dr Timothy C. Lethbridge, Fran&ccedil;ois B&eacute;langer, Paul Holden</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>schedule_project.lloseng.ocsf.server.ConnectionToClient</code>, 
<code>schedule_project.lloseng.ocsf.server.AbstractConnectionFactory</code></dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#backlog">backlog</a></span></code></th>
<td class="colLast">
<div class="block">The maximum queue length; i.e.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.ThreadGroup</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clientThreadGroup">clientThreadGroup</a></span></code></th>
<td class="colLast">
<div class="block">The thread group associated with client threads.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="AbstractConnectionFactory.html" title="class in Clinic.Server.Connection">AbstractConnectionFactory</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectionFactory">connectionFactory</a></span></code></th>
<td class="colLast">
<div class="block">The factory used to create new connections to clients.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Thread</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectionListener">connectionListener</a></span></code></th>
<td class="colLast">
<div class="block">The connection listener thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#port">port</a></span></code></th>
<td class="colLast">
<div class="block">The port number</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readyToStop">readyToStop</a></span></code></th>
<td class="colLast">
<div class="block">Indicates if the listening thread is ready to stop.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.net.ServerSocket</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#serverSocket">serverSocket</a></span></code></th>
<td class="colLast">
<div class="block">The server socket: listens for clients who want to connect.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#timeout">timeout</a></span></code></th>
<td class="colLast">
<div class="block">The server timeout while for accepting connections.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(int)">AbstractServer</a></span>&#8203;(int&nbsp;port)</code></th>
<td class="colLast">
<div class="block">Constructs a new server.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="tableTab" onclick="show(4);">Abstract Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clientConnected(Clinic.Server.Connection.ConnectionToClient)">clientConnected</a></span>&#8203;(<a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client)</code></th>
<td class="colLast">
<div class="block">Hook method called each time a new client connection is
 accepted.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clientDisconnected(Clinic.Server.Connection.ConnectionToClient)">clientDisconnected</a></span>&#8203;(<a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client)</code></th>
<td class="colLast">
<div class="block">Hook method called each time a client disconnects.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clientException(Clinic.Server.Connection.ConnectionToClient,java.lang.Throwable)">clientException</a></span>&#8203;(<a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client,
java.lang.Throwable&nbsp;exception)</code></th>
<td class="colLast">
<div class="block">Hook method called each time an exception is thrown in a
 ConnectionToClient thread.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Closes the server socket and the connections with all clients.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>java.lang.Thread[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getClientConnections()">getClientConnections</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns an array containing the existing
 client connections.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNumberOfClients()">getNumberOfClients</a></span>()</code></th>
<td class="colLast">
<div class="block">Counts the number of clients currently connected.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPort()">getPort</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the port number.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>protected abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#handleMessageFromClient(java.lang.Object,Clinic.Server.Connection.ConnectionToClient)">handleMessageFromClient</a></span>&#8203;(java.lang.Object&nbsp;msg,
<a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client)</code></th>
<td class="colLast">
<div class="block">Handles a command sent from one client to the server.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isClosed()">isClosed</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true if the server is closed.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isListening()">isListening</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true if the server is ready to accept new clients.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#listen()">listen</a></span>()</code></th>
<td class="colLast">
<div class="block">Begins the thread that waits for new clients.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#listeningException(java.lang.Throwable)">listeningException</a></span>&#8203;(java.lang.Throwable&nbsp;exception)</code></th>
<td class="colLast">
<div class="block">Hook method called when the server stops accepting
 connections because an exception has been raised.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#receiveMessageFromClient(java.lang.Object,Clinic.Server.Connection.ConnectionToClient)">receiveMessageFromClient</a></span>&#8203;(java.lang.Object&nbsp;msg,
<a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client)</code></th>
<td class="colLast">
<div class="block">Receives a command sent from the client to the server.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run()">run</a></span>()</code></th>
<td class="colLast">
<div class="block">Runs the listening thread that allows clients to connect.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sendToAllClients(java.lang.Object)">sendToAllClients</a></span>&#8203;(java.lang.Object&nbsp;msg)</code></th>
<td class="colLast">
<div class="block">Sends a message to every client connected to the server.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#serverClosed()">serverClosed</a></span>()</code></th>
<td class="colLast">
<div class="block">Hook method called when the server is clased.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#serverStarted()">serverStarted</a></span>()</code></th>
<td class="colLast">
<div class="block">Hook method called when the server starts listening for
 connections.</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#serverStopped()">serverStopped</a></span>()</code></th>
<td class="colLast">
<div class="block">Hook method called when the server stops accepting
 connections.</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setBacklog(int)">setBacklog</a></span>&#8203;(int&nbsp;backlog)</code></th>
<td class="colLast">
<div class="block">Sets the maximum number of waiting connections accepted by the
 operating system.</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setConnectionFactory(Clinic.Server.Connection.AbstractConnectionFactory)">setConnectionFactory</a></span>&#8203;(<a href="AbstractConnectionFactory.html" title="class in Clinic.Server.Connection">AbstractConnectionFactory</a>&nbsp;factory)</code></th>
<td class="colLast">
<div class="block">Sets the connection factory.</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPort(int)">setPort</a></span>&#8203;(int&nbsp;port)</code></th>
<td class="colLast">
<div class="block">Sets the port number for the next connection.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setTimeout(int)">setTimeout</a></span>&#8203;(int&nbsp;timeout)</code></th>
<td class="colLast">
<div class="block">Sets the timeout time when accepting connections.</div>
</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#stopListening()">stopListening</a></span>()</code></th>
<td class="colLast">
<div class="block">Causes the server to stop accepting new connections.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="serverSocket">serverSocket</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.net.ServerSocket</span>&nbsp;<span class="memberName">serverSocket</span></div>
<div class="block">The server socket: listens for clients who want to connect.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="connectionListener">connectionListener</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.lang.Thread</span>&nbsp;<span class="memberName">connectionListener</span></div>
<div class="block">The connection listener thread.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="port">port</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">port</span></div>
<div class="block">The port number</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="timeout">timeout</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">timeout</span></div>
<div class="block">The server timeout while for accepting connections.
 After timing out, the server will check to see if a command to
 stop the server has been issued; it not it will resume accepting
 connections.
 Set to half a second by default.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="backlog">backlog</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">backlog</span></div>
<div class="block">The maximum queue length; i.e. the maximum number of clients that
 can be waiting to connect.
 Set to 10 by default.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="clientThreadGroup">clientThreadGroup</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.lang.ThreadGroup</span>&nbsp;<span class="memberName">clientThreadGroup</span></div>
<div class="block">The thread group associated with client threads. Each member of the
 thread group is a <code> ConnectionToClient </code>.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="readyToStop">readyToStop</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">readyToStop</span></div>
<div class="block">Indicates if the listening thread is ready to stop.  Set to
 false by default.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="connectionFactory">connectionFactory</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType"><a href="AbstractConnectionFactory.html" title="class in Clinic.Server.Connection">AbstractConnectionFactory</a></span>&nbsp;<span class="memberName">connectionFactory</span></div>
<div class="block">The factory used to create new connections to clients.
 Is null by default, meaning that regular <code>ConnectionToClient</code>
 instances will be created. Added in version 2.3</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(int)">AbstractServer</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">AbstractServer</span>&#8203;(<span class="arguments">int&nbsp;port)</span></div>
<div class="block">Constructs a new server.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>port</code> - the port number on which to listen.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="listen()">listen</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">listen</span>()
                  throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Begins the thread that waits for new clients.
 If the server is already in listening mode, this
 call has no effect.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs
 when creating the server socket.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="stopListening()">stopListening</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">stopListening</span>()</div>
<div class="block">Causes the server to stop accepting new connections.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="close()">close</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">close</span>()
                 throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Closes the server socket and the connections with all clients.
 Any exception thrown while closing a client is ignored.
 If one wishes to catch these exceptions, then clients
 should be individually closed before calling this method.
 The method also stops listening if this thread is running.
 If the server is already closed, this
 call has no effect.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs while
 closing the server socket.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sendToAllClients(java.lang.Object)">sendToAllClients</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">sendToAllClients</span>&#8203;(<span class="arguments">java.lang.Object&nbsp;msg)</span></div>
<div class="block">Sends a message to every client connected to the server.
 This is merely a utility; a subclass may want to do some checks
 before actually sending messages to all clients.
 This method can be overriden, but if so it should still perform
 the general function of sending to all clients, perhaps after some kind
 of filtering is done. Any exception thrown while
 sending the message to a particular client is ignored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - Object The message to be sent</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isListening()">isListening</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isListening</span>()</div>
<div class="block">Returns true if the server is ready to accept new clients.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the server is listening.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isClosed()">isClosed</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isClosed</span>()</div>
<div class="block">Returns true if the server is closed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the server is closed.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>version 2.2</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getClientConnections()">getClientConnections</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">java.lang.Thread[]</span>&nbsp;<span class="memberName">getClientConnections</span>()</div>
<div class="block">Returns an array containing the existing
 client connections. This can be used by
 concrete subclasses to implement messages that do something with
 each connection (e.g. kill it, send a message to it etc.).
 Remember that after this array is obtained, some clients
 in this might disconnect. New clients can also connect,
 these later will not appear in the array.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an array of <code>Thread</code> containing
 <code>ConnectionToClient</code> instances.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNumberOfClients()">getNumberOfClients</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getNumberOfClients</span>()</div>
<div class="block">Counts the number of clients currently connected.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of clients currently connected.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getPort()">getPort</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getPort</span>()</div>
<div class="block">Returns the port number.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the port number.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setPort(int)">setPort</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setPort</span>&#8203;(<span class="arguments">int&nbsp;port)</span></div>
<div class="block">Sets the port number for the next connection.
 The server must be closed and restarted for the port
 change to be in effect.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>port</code> - the port number.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setTimeout(int)">setTimeout</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setTimeout</span>&#8203;(<span class="arguments">int&nbsp;timeout)</span></div>
<div class="block">Sets the timeout time when accepting connections.
 The default is half a second. This means that stopping the
 server may take up to timeout duration to actually stop.
 The server must be stopped and restarted for the timeout
 change to be effective.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - the timeout time in ms.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setBacklog(int)">setBacklog</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setBacklog</span>&#8203;(<span class="arguments">int&nbsp;backlog)</span></div>
<div class="block">Sets the maximum number of waiting connections accepted by the
 operating system. The default is 20.
 The server must be closed and restarted for the backlog
 change to be in effect.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>backlog</code> - the maximum number of connections.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setConnectionFactory(Clinic.Server.Connection.AbstractConnectionFactory)">setConnectionFactory</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setConnectionFactory</span>&#8203;(<span class="arguments"><a href="AbstractConnectionFactory.html" title="class in Clinic.Server.Connection">AbstractConnectionFactory</a>&nbsp;factory)</span></div>
<div class="block">Sets the connection factory.
 Once set, this one will be used in the creation
 of new <code>ConnectionToClient</code> instances.
 The call to this method is optional; if not called
 Then regular <code>ConnectionToClient</code> instances
 are created. Added in version 2.3</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>factory</code> - the connection factory.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="run()">run</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">run</span>()</div>
<div class="block">Runs the listening thread that allows clients to connect.
 Not to be called.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="clientConnected(Clinic.Server.Connection.ConnectionToClient)">clientConnected</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">clientConnected</span>&#8203;(<span class="arguments"><a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client)</span></div>
<div class="block">Hook method called each time a new client connection is
 accepted. The default implementation does nothing.
 This method does not have to be synchronized since only
 one client can be accepted at a time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>client</code> - the connection connected to the client.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="clientDisconnected(Clinic.Server.Connection.ConnectionToClient)">clientDisconnected</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">clientDisconnected</span>&#8203;(<span class="arguments"><a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client)</span></div>
<div class="block">Hook method called each time a client disconnects.
 The client is guarantee to be disconnected but the thread
 is still active until it is asynchronously removed from the thread group. 
 The default implementation does nothing. The method
 may be overridden by subclasses but should remains synchronized.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>client</code> - the connection with the client.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="clientException(Clinic.Server.Connection.ConnectionToClient,java.lang.Throwable)">clientException</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">clientException</span>&#8203;(<span class="arguments"><a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client,
java.lang.Throwable&nbsp;exception)</span></div>
<div class="block">Hook method called each time an exception is thrown in a
 ConnectionToClient thread.
 The method may be overridden by subclasses but should remains
 synchronized. 
 Most exceptions will cause the end of the client's thread except for
 <code>ClassNotFoundException<\code>s received when an object of
 unknown class is received and for the <code>RuntimeException</code>s
 that can be thrown by the message handling method implemented by the user.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>client</code> - the client that raised the exception.</dd>
<dd><code>Throwable</code> - the exception thrown.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="listeningException(java.lang.Throwable)">listeningException</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">listeningException</span>&#8203;(<span class="arguments">java.lang.Throwable&nbsp;exception)</span></div>
<div class="block">Hook method called when the server stops accepting
 connections because an exception has been raised.
 The default implementation does nothing.
 This method may be overriden by subclasses.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>exception</code> - the exception raised.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="serverStarted()">serverStarted</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">serverStarted</span>()</div>
<div class="block">Hook method called when the server starts listening for
 connections.  The default implementation does nothing.
 The method may be overridden by subclasses.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="serverStopped()">serverStopped</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">serverStopped</span>()</div>
<div class="block">Hook method called when the server stops accepting
 connections.  The default implementation
 does nothing. This method may be overriden by subclasses.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="serverClosed()">serverClosed</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">serverClosed</span>()</div>
<div class="block">Hook method called when the server is clased.
 The default implementation does nothing. This method may be
 overriden by subclasses. When the server is closed while still
 listening, serverStopped() will also be called.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="handleMessageFromClient(java.lang.Object,Clinic.Server.Connection.ConnectionToClient)">handleMessageFromClient</a></h3>
<div class="memberSignature"><span class="modifiers">protected abstract</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">handleMessageFromClient</span>&#8203;(<span class="arguments">java.lang.Object&nbsp;msg,
<a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client)</span>
                                         throws <span class="exceptions">java.lang.InterruptedException</span></div>
<div class="block">Handles a command sent from one client to the server.
 This MUST be implemented by subclasses, who should respond to
 messages.
 This method is called by a synchronized method so it is also
 implcitly synchronized.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - the message sent.</dd>
<dd><code>client</code> - the connection connected to the client that
  sent the message.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="receiveMessageFromClient(java.lang.Object,Clinic.Server.Connection.ConnectionToClient)">receiveMessageFromClient</a></h3>
<div class="memberSignature"><span class="modifiers">final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">receiveMessageFromClient</span>&#8203;(<span class="arguments">java.lang.Object&nbsp;msg,
<a href="ConnectionToClient.html" title="class in Clinic.Server.Connection">ConnectionToClient</a>&nbsp;client)</span>
                             throws <span class="exceptions">java.lang.InterruptedException</span></div>
<div class="block">Receives a command sent from the client to the server.
 Called by the run method of <code>ConnectionToClient</code>
 instances that are watching for messages coming from the server
 This method is synchronized to ensure that whatever effects it has
 do not conflict with work being done by other threads. The method
 simply calls the <code>handleMessageFromClient</code> slot method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - the message sent.</dd>
<dd><code>client</code> - the connection connected to the client that
  sent the message.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
